# OpenAI ëª¨ë¸ ì¶”ìƒí™” ì•„í‚¤í…ì²˜ ì„¤ê³„

## ğŸ“‹ ë¬¸ì„œ ì •ë³´

- **ì‘ì„±ì¼**: 2025-01-10
- **ë²„ì „**: 1.0.0
- **ìƒíƒœ**: âœ… ì™„ë£Œ

## ğŸ¯ ì„¤ê³„ ëª©í‘œ

OpenAIì˜ Reasoning ëª¨ë¸ê³¼ Chat Completion ëª¨ë¸ì„ ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¶”ìƒí™” ë ˆì´ì–´ë¥¼ í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.

### í•µì‹¬ ìš”êµ¬ì‚¬í•­

1. **í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ ì¤€ìˆ˜**: Domain-Application-Infrastructure ë ˆì´ì–´ ë¶„ë¦¬
2. **ë‹¨ì¼ ì±…ì„ ì›ì¹™**: ê° ì»´í¬ë„ŒíŠ¸ê°€ í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì§
3. **RFS Framework í†µí•©**: Result íŒ¨í„´, HOF, Guard, Registry í™œìš©
4. **Jinja2 í…œí”Œë¦¿**: í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ê´€ë¦¬
5. **REST API ì „ìš©**: SSE ìŠ¤íŠ¸ë¦¬ë° ë¯¸ì‚¬ìš©

## ğŸ—ï¸ í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì™¸ë¶€ ì„¸ê³„ (External)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  FastAPI     â”‚  â”‚  Jinja2      â”‚  â”‚  OpenAI      â”‚      â”‚
â”‚  â”‚  Endpoint    â”‚  â”‚  Templates   â”‚  â”‚  REST API    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Infrastructure Layer (ì–´ëŒ‘í„°)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Primary Adapters (Inbound)                          â”‚   â”‚
â”‚  â”‚  â€¢ FastAPIController (HTTP ìš”ì²­ â†’ DTO ë³€í™˜)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Secondary Adapters (Outbound)                       â”‚   â”‚
â”‚  â”‚  â€¢ OpenAIReasoningAdapter  (ModelPort êµ¬í˜„)          â”‚   â”‚
â”‚  â”‚  â€¢ OpenAIChatAdapter       (ModelPort êµ¬í˜„)          â”‚   â”‚
â”‚  â”‚  â€¢ Jinja2TemplateAdapter   (TemplatePort êµ¬í˜„)       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Factory                                              â”‚   â”‚
â”‚  â”‚  â€¢ ModelAdapterFactory (ì–´ëŒ‘í„° ìƒì„± ë° Registry ê´€ë¦¬) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Application Layer (ìœ ìŠ¤ì¼€ì´ìŠ¤)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Services                                             â”‚   â”‚
â”‚  â”‚  â€¢ ModelExecutionService                              â”‚   â”‚
â”‚  â”‚    - execute_with_template()                          â”‚   â”‚
â”‚  â”‚    - execute_direct()                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  DTO (Data Transfer Objects)                          â”‚   â”‚
â”‚  â”‚  â€¢ ModelRequestDTO                                    â”‚   â”‚
â”‚  â”‚  â€¢ ModelResponseDTO                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Domain Layer (í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Entities (ë¹„ì¦ˆë‹ˆìŠ¤ ì—”í‹°í‹°)                            â”‚   â”‚
â”‚  â”‚  â€¢ ModelRequest  (ëª¨ë¸ ìš”ì²­ ì—”í‹°í‹°)                   â”‚   â”‚
â”‚  â”‚  â€¢ ModelResponse (ëª¨ë¸ ì‘ë‹µ ì—”í‹°í‹°)                   â”‚   â”‚
â”‚  â”‚  â€¢ ModelConfig   (ëª¨ë¸ ì„¤ì • ì—”í‹°í‹°)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Value Objects (ë¶ˆë³€ ê°’ ê°ì²´)                          â”‚   â”‚
â”‚  â”‚  â€¢ ModelType (REASONING, CHAT)                        â”‚   â”‚
â”‚  â”‚  â€¢ Message   (role, content)                          â”‚   â”‚
â”‚  â”‚  â€¢ TemplateContext (í…œí”Œë¦¿ ë³€ìˆ˜)                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ports (ì¸í„°í˜ì´ìŠ¤)                                    â”‚   â”‚
â”‚  â”‚  â€¢ ModelPort     (ëª¨ë¸ ì‹¤í–‰ í¬íŠ¸)                     â”‚   â”‚
â”‚  â”‚  â€¢ TemplatePort  (í…œí”Œë¦¿ ë Œë”ë§ í¬íŠ¸)                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ë ˆì´ì–´ë³„ ì±…ì„

### 1. Domain Layer (í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)

**ì±…ì„**: ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ê³¼ ë„ë©”ì¸ ëª¨ë¸ ì •ì˜

**ì»´í¬ë„ŒíŠ¸**:
- **Entities**: ë¹„ì¦ˆë‹ˆìŠ¤ ê°œë…ì„ í‘œí˜„í•˜ëŠ” ë¶ˆë³€ ê°ì²´
  - `ModelRequest`: ëª¨ë¸ ì‹¤í–‰ ìš”ì²­ ì •ë³´
  - `ModelResponse`: ëª¨ë¸ ì‹¤í–‰ ê²°ê³¼
  - `ModelConfig`: ëª¨ë¸ ì„¤ì • (temperature, max_tokens ë“±)

- **Value Objects**: ì‹ë³„ì ì—†ëŠ” ë¶ˆë³€ ê°’
  - `ModelType`: ëª¨ë¸ íƒ€ì… ì—´ê±°í˜• (REASONING, CHAT)
  - `Message`: ëŒ€í™” ë©”ì‹œì§€ (role, content)
  - `TemplateContext`: í…œí”Œë¦¿ ë Œë”ë§ ì»¨í…ìŠ¤íŠ¸

- **Ports** (ì¸í„°í˜ì´ìŠ¤): ì™¸ë¶€ ì˜ì¡´ì„± ì¶”ìƒí™”
  - `ModelPort`: ëª¨ë¸ ì‹¤í–‰ ì¶”ìƒí™”
  - `TemplatePort`: í…œí”Œë¦¿ ë Œë”ë§ ì¶”ìƒí™”

**íŠ¹ì§•**:
- âœ… ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ (ìˆœìˆ˜ Python + RFS Frameworkë§Œ ì‚¬ìš©)
- âœ… ëª¨ë“  ë©”ì„œë“œëŠ” `Result[T, E]` ë°˜í™˜
- âœ… ë¶ˆë³€ì„± ìœ ì§€
- âœ… íƒ€ì… íŒíŠ¸ ì™„ì „ ì ìš©

### 2. Application Layer (ìœ ìŠ¤ì¼€ì´ìŠ¤)

**ì±…ì„**: ë¹„ì¦ˆë‹ˆìŠ¤ ìœ ìŠ¤ì¼€ì´ìŠ¤ êµ¬í˜„ ë° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜

**ì»´í¬ë„ŒíŠ¸**:
- **Services**: ìœ ìŠ¤ì¼€ì´ìŠ¤ êµ¬í˜„
  - `ModelExecutionService`: ëª¨ë¸ ì‹¤í–‰ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
    - í…œí”Œë¦¿ ë Œë”ë§ â†’ ëª¨ë¸ ì‹¤í–‰ â†’ ì‘ë‹µ ë³€í™˜ íŒŒì´í”„ë¼ì¸

- **DTO**: ë ˆì´ì–´ ê°„ ë°ì´í„° ì „ì†¡
  - `ModelRequestDTO`: ì™¸ë¶€ ì…ë ¥ â†’ Domain ë³€í™˜
  - `ModelResponseDTO`: Domain â†’ ì™¸ë¶€ ì‘ë‹µ ë³€í™˜

**íŠ¹ì§•**:
- âœ… Domain Portsë¥¼ í†µí•´ Infrastructureì™€ í†µì‹ 
- âœ… RFS HOF íŒ¨í„´ í™œìš© (pipe, bind, map)
- âœ… Result ì²´ì´ë‹ìœ¼ë¡œ ì—ëŸ¬ ì²˜ë¦¬
- âœ… ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì§‘ì¤‘

### 3. Infrastructure Layer (ì–´ëŒ‘í„°)

**ì±…ì„**: ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ í†µí•© êµ¬í˜„

**ì»´í¬ë„ŒíŠ¸**:

**Primary Adapters (Inbound)**:
- `FastAPIController`: HTTP ìš”ì²­ â†’ DTO ë³€í™˜

**Secondary Adapters (Outbound)**:
- `BaseOpenAIAdapter`: OpenAI REST API ê³µí†µ ê¸°ëŠ¥
- `OpenAIReasoningAdapter`: Reasoning ëª¨ë¸ íŠ¹í™” êµ¬í˜„
- `OpenAIChatAdapter`: Chat Completion ëª¨ë¸ íŠ¹í™” êµ¬í˜„
- `Jinja2TemplateAdapter`: Jinja2 í…œí”Œë¦¿ ë Œë”ë§ êµ¬í˜„

**Factory**:
- `ModelAdapterFactory`:
  - RFS Registry ê¸°ë°˜ ì–´ëŒ‘í„° ìƒì„±
  - ëª¨ë¸ íƒ€ì…ì— ë”°ë¥¸ ì ì ˆí•œ ì–´ëŒ‘í„° ë°˜í™˜

**íŠ¹ì§•**:
- âœ… Domain Ports êµ¬í˜„
- âœ… ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì§ì ‘ ì‚¬ìš© (openai, jinja2)
- âœ… Result íŒ¨í„´ìœ¼ë¡œ ì—ëŸ¬ ë˜í•‘
- âœ… ì„¤ì • ì£¼ì… (API key, base URL ë“±)

## ğŸ”„ ë°ì´í„° íë¦„

### í…œí”Œë¦¿ ê¸°ë°˜ ì‹¤í–‰ í”Œë¡œìš°

```
1. HTTP Request (FastAPI)
   â†“
2. Primary Adapter (Controller)
   â†’ ModelRequestDTO ìƒì„±
   â†“
3. Application Service
   â†’ DTO â†’ Domain Entity ë³€í™˜
   â†“
4. TemplatePort (Jinja2Adapter)
   â†’ í…œí”Œë¦¿ ë Œë”ë§: Result[str, str]
   â†“
5. ModelPort (OpenAI Adapter)
   â†’ REST API í˜¸ì¶œ: Result[ModelResponse, str]
   â†“
6. Application Service
   â†’ Domain Entity â†’ DTO ë³€í™˜
   â†“
7. Primary Adapter (Controller)
   â†’ HTTP Response ë³€í™˜
```

### ì§ì ‘ ì‹¤í–‰ í”Œë¡œìš°

```
1. HTTP Request (FastAPI)
   â†“
2. Primary Adapter (Controller)
   â†’ ModelRequestDTO ìƒì„±
   â†“
3. Application Service
   â†’ DTO â†’ Domain Entity ë³€í™˜
   â†“
4. ModelPort (OpenAI Adapter)
   â†’ REST API ì§ì ‘ í˜¸ì¶œ: Result[ModelResponse, str]
   â†“
5. Application Service
   â†’ Domain Entity â†’ DTO ë³€í™˜
   â†“
6. Primary Adapter (Controller)
   â†’ HTTP Response ë³€í™˜
```

## ğŸ§© ì»´í¬ë„ŒíŠ¸ ì˜ì¡´ì„± ë§µ

```
FastAPI Controller
    â†“ (ì˜ì¡´)
ModelExecutionService
    â†“ (ì˜ì¡´)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
ModelPort     TemplatePort
(ì¸í„°í˜ì´ìŠ¤)   (ì¸í„°í˜ì´ìŠ¤)
    â†‘              â†‘
    â”‚              â”‚
    â”‚ (êµ¬í˜„)       â”‚ (êµ¬í˜„)
    â”‚              â”‚
OpenAIAdapter  Jinja2Adapter
    â†‘
    â”‚ (ìƒì„±)
    â”‚
ModelAdapterFactory
    â†‘
    â”‚ (ì‚¬ìš©)
    â”‚
Registry (RFS)
```

## ğŸ” RFS Framework í†µí•©

### 1. Result íŒ¨í„´

ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•Šê³  `Result[T, E]` ë°˜í™˜:

```python
from rfs.core.result import Result, Success, Failure

def execute_model(request: ModelRequest) -> Result[ModelResponse, str]:
    # ì„±ê³µ ì‹œ
    return Success(response)

    # ì‹¤íŒ¨ ì‹œ
    return Failure("ëª¨ë¸ ì‹¤í–‰ ì‹¤íŒ¨: API ì—ëŸ¬")
```

### 2. HOF (Higher-Order Functions)

í•¨ìˆ˜ í•©ì„±ê³¼ ì²´ì´ë‹ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ êµ¬ì„±:

```python
from rfs.hof.core import pipe

execution_pipeline = pipe(
    validate_request,           # ì…ë ¥ ê²€ì¦
    render_template_if_needed,  # í…œí”Œë¦¿ ë Œë”ë§
    execute_model,              # ëª¨ë¸ ì‹¤í–‰
    parse_response              # ì‘ë‹µ íŒŒì‹±
)

result = execution_pipeline(request_dto)
```

### 3. Guard íŒ¨í„´

ì…ë ¥ ê²€ì¦ì— Swift ìŠ¤íƒ€ì¼ guard ì‚¬ìš©:

```python
from rfs.hof.guard import guard, guard_let, guard_type

def validate_request(request: ModelRequest) -> Result[ModelRequest, str]:
    guard(request.messages, "ë©”ì‹œì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤")
    guard_type(request.model_type, ModelType, "ì˜ëª»ëœ ëª¨ë¸ íƒ€ì…")
    return Success(request)
```

### 4. Registry íŒ¨í„´

ì–´ëŒ‘í„° ë“±ë¡ ë° ê´€ë¦¬:

```python
from rfs.core.registry import Registry

registry = Registry()
registry.register(ModelType.REASONING, OpenAIReasoningAdapter)
registry.register(ModelType.CHAT, OpenAIChatAdapter)
```

## ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
src/
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ ai_model/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ entities/
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ model_request.py
â”‚       â”‚   â”œâ”€â”€ model_response.py
â”‚       â”‚   â””â”€â”€ model_config.py
â”‚       â”œâ”€â”€ value_objects/
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ model_type.py
â”‚       â”‚   â”œâ”€â”€ message.py
â”‚       â”‚   â””â”€â”€ template_context.py
â”‚       â””â”€â”€ ports/
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ model_port.py
â”‚           â””â”€â”€ template_port.py
â”‚
â”œâ”€â”€ application/
â”‚   â””â”€â”€ ai_model/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ services/
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ model_execution_service.py
â”‚       â””â”€â”€ dto/
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ model_request_dto.py
â”‚           â””â”€â”€ model_response_dto.py
â”‚
â”œâ”€â”€ infrastructure/
â”‚   â””â”€â”€ ai_model/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ adapters/
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ base_openai_adapter.py
â”‚       â”‚   â”œâ”€â”€ openai_reasoning_adapter.py
â”‚       â”‚   â”œâ”€â”€ openai_chat_adapter.py
â”‚       â”‚   â””â”€â”€ jinja2_template_adapter.py
â”‚       â””â”€â”€ factories/
â”‚           â”œâ”€â”€ __init__.py
â”‚           â””â”€â”€ model_adapter_factory.py
â”‚
â””â”€â”€ templates/
    â””â”€â”€ ai_model/
        â”œâ”€â”€ reasoning/
        â”‚   â”œâ”€â”€ default.j2
        â”‚   â””â”€â”€ chain_of_thought.j2
        â””â”€â”€ chat/
            â”œâ”€â”€ default.j2
            â””â”€â”€ system_user.j2
```

## âœ… ì„¤ê³„ ì›ì¹™ ì¤€ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] **í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜**: Domain-Application-Infrastructure ëª…í™•íˆ ë¶„ë¦¬
- [x] **ë‹¨ì¼ ì±…ì„ ì›ì¹™**: ê° ì»´í¬ë„ŒíŠ¸ê°€ í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì§
- [x] **ì˜ì¡´ì„± ì—­ì „**: Domainì´ Infrastructureì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ (Ports ì‚¬ìš©)
- [x] **RFS Result íŒ¨í„´**: ëª¨ë“  ë©”ì„œë“œê°€ Result ë°˜í™˜
- [x] **RFS HOF íŒ¨í„´**: pipe, bind, map í™œìš©
- [x] **RFS Guard íŒ¨í„´**: ì…ë ¥ ê²€ì¦
- [x] **RFS Registry**: ì–´ëŒ‘í„° ê´€ë¦¬
- [x] **ë¶ˆë³€ì„±**: Value Objectsì™€ Entities ë¶ˆë³€
- [x] **íƒ€ì… ì•ˆì •ì„±**: ì™„ì „í•œ íƒ€ì… íŒíŠ¸
- [x] **í•œê¸€ ì£¼ì„**: ëª¨ë“  ì£¼ì„ í•œê¸€ ì‘ì„±

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. âœ… **ì™„ë£Œ**: ì•„í‚¤í…ì²˜ ì„¤ê³„ ë¬¸ì„œ
2. **ë‹¤ìŒ**: Domain Layer ìƒì„¸ ì„¤ê³„ ([02-domain-layer.md](02-domain-layer.md))
3. **ì˜ˆì •**: Application Layer ìƒì„¸ ì„¤ê³„
4. **ì˜ˆì •**: Infrastructure Layer ìƒì„¸ ì„¤ê³„
5. **ì˜ˆì •**: API ëª…ì„¸ ë¬¸ì„œ

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- [RFS Framework í•„ìˆ˜ ê·œì¹™](/rules/00-mandatory-rules.md)
- [OpenAI Python SDK](https://github.com/openai/openai-python)
- [Jinja2 Documentation](https://jinja.palletsprojects.com/)
